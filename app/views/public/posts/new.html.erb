<div>
  
  <div>
    <h2>新規投稿</h2>
  </div>
  
  <div>
    <%= form_with(model: @post, local: true) do |f| %>
    
    <div>
      
      <div>
        <%= f.file_field :image, accept: "image/*" %>
      </div>
      
      <div>
        <%= f.label :title, "タイトル" %>
        <%= f.text_field :title %>
      </div>
      
      <div>
        <%= f.label :body, "本文" %>
        <%= f.text_area :body %>
      </div>
      
      <div>
        <%= f.label :genre_id, "ジャンル" %>
        <%= f.collection_select :genre_id, Genre.all, :id, :name, prompt: "ジャンルを選択" %>
      </div>
      
      <div>
        <div class="form-group" id="star">
          <%= f.label :star, "評価" %>
          <%= f.hidden_field :star, id: :review_star, class: 'form-control' %>
          <div id="post_raty"></div>
        </div>
        <script>
          $(document).on('turbolinks:load', function() {
            let elem = document.querySelector('#post_raty');
            if (elem == null) return;
        
            elem.innerHTML = ""
            let opt = {  
            starOn: "<%= asset_path('star-on.png') %>",
            starOff: "<%= asset_path('star-off.png') %>",
            starHalf: "<%= asset_path('star-half.png') %>",
            scoreName: 'post[star]',
            half: true,
            halfShow: true
            };
            raty(elem, opt);
          });
        </script>
      </div>
        
      <div>
        <%= f.submit "投稿する", class:"btn btn-success" %>
      </div>
      
    
    </div>
    
    <% end %>
  </div>
  
</div>
